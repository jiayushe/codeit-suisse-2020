<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CodeIT Suisse 2020 | Bucket Filling</title>
    <link rel="stylesheet" href="./bucket_fill_files/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="./bucket_fill_files/index.css" type="text/css">
</head>
<body>
<div class="container clearTop">
    <!-- CHALLENGE INFO -->
    <div class="row" id="challenge-title">
        <div class="col-sm-12"></div>
        <div class="col-sm-12">
            <h1>Bucket Fill</h1>
        </div>
    </div>
    <hr>
    <div class="row" id="problem">
        <div class="col-sm-12">
            <p>You are given a 2D graph of some water sources, buckets and pipes in SVG format. Water will flow
                vertically downwards from the water source(s) to the bottom of the SVG. Along its way down, it fills up
                the buckets or gets redirected by the pipes.
            </p>
            <p>
                Your task is to calculate the total area of buckets that will be filled with water.
            </p>
        </div>
    </div>
    <div class="clearMain"></div>

    <!-- REQUIREMENT -->
    <div class="row section-header" id="requirement-header">
        <div class="col-sm-12">
            <h4>Requirement</h4>
        </div>
    </div>
    <div class="row" id="requirement">
        <div class="col-sm-12">
            <ul>
                <li>Expose a POST method with endpoint <code>/bucket-fill</code>.</li>
                <li>This endpoint should accept <code>Content-Type: image/svg+xml</code>.</li>
                <li>It should return a body with <code>Content-Type: application/json</code>.</li>
            </ul>
        </div>
    </div>
    <div class="clearMain"></div>

    <!-- INPUT -->
    <div class="row section-header" id="input-header">
        <div class="col-sm-12">
            <h4>Input</h4>
        </div>
    </div>
    <div class="row" id="input">
        <div class="col-sm-12">
            <p>
                Note: There will be varying difficulties, the numbers indicated below is for the maximum difficulty.
            </p>
            <ul>
                <li>SVG will be in a maximum size of 2048x2048.</li>
                <li>Co-ordinates will always be in integers.</li>
                <li>Water is denoted as <code>&lt;circle/&gt;</code> in the SVG.</li>
                <li>A pipe or bucket is denoted as <code>&lt;polyline/&gt;</code> in the SVG.</li>
                <li>2 ≤ Number of Buckets ≤ 64</li>
                <li>1 ≤ Number of Pipes ≤ 64</li>
            </ul>
            <div class="col-sm-12">
                <h6>Sample Input:</h6>
                <pre>                    <code>
    &lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1024" height="1024"&gt;
        &lt;circle cx="500" cy="0" r="1" stroke="blue" fill="none" /&gt;
        &lt;polyline fill="none" stroke="black" points="360,175 360,225 400,225 400,175" /&gt;
        &lt;polyline fill="none" stroke="black" points="480,5 480,40 520,40 520,5" /&gt;
        &lt;polyline fill="none" stroke="black" points="500,50 400,150" /&gt;
    &lt;/svg&gt;</code>
                </pre>
                <p>You may view above svg <a href="https://cis2020-bucket-fill.herokuapp.com/sample.svg" target="_blank">here</a>.</p>
            </div>
        </div>
    </div>
    <div class="clearMain"></div>

    <!-- OUTPUT -->
    <div class="row section-header" id="output-header">
        <div class="col-sm-12">
            <h4>Output</h4>
        </div>
    </div>
    <div class="row" id="output">
        <div class="col-sm-12">
            <div class="col-sm-12">
                <p>Expected json result should be in this format: <code>{ result: &lt;THE_NUMERIC_ANSWER_HERE&gt;
                    }</code>.</p>
                <h6>Sample Output:</h6>
                <pre>                    <code>
    {
        result: 3315
    }</code>
                </pre>
                <h6>Explanation:</h6>
                <ul>
                    <li>There is one water source at <code>(500, 0)</code>.</li>
                    <li>There is a bucket bounded by the top left corner <code>(480, 5)</code> and bottom right corner
                        <code>(520, 40)</code>, which has an area of <code>1365</code>.</li>
                    <li>There is another bucket bounded by the top left corner <code>(360, 175)</code> and bottom right
                        corner <code>(400, 225)</code>, which has an area of <code>1950</code>.</li>
                    <li>Finally, there is a pipe that starts at <code>(500, 50)</code> and ends at
                        <code>(400, 150)</code>.</li>
                    <li>Since the water source will fill the first bucket, and then the second one with the help of the
                        pipe, the answer for this 2D graph is <code>3315</code>.</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="clearMain"></div>
    <!-- SCORING -->
    <div class="row section-header" id="scoring-header">
        <div class="col-sm-12">
            <h4>Scoring Guideline</h4>
        </div>
    </div>
    <div class="row" id="scoring-description">
        <div class="col-sm-12">
            <p>
                Your result will only be scored if it is within 50% or 200% of the expected answer. In other words, you will get some score if you get close enough.
            </p>
        </div>
    </div>
    <div class="clearMain"></div>
    <!-- ASSUMPTIONS -->
    <div class="row section-header" id="assumptions-header">
        <div class="col-sm-12">
            <h4>Assumptions</h4>
        </div>
    </div>
    <div class="row" id="assumptions-description">
        <div class="col-sm-12">
            <ul>
                <li>All elements in SVG will have a line thickness of 1px.</li>
                <li>
                    There is at least one water source and either a bucket or pipe given in the SVG file. From the SVG
                    perspective, that means there is at least one <code>&lt;circle/&gt;</code> and one
                    <code>&lt;polyline/&gt;</code> element.
                </li>
                <li>Water sources have an infinite amount of water.</li>
                <li>Pipes are diagonal bounded by a square, and will always have a tangent of 1 or -1.</li>
                <li>For a pipe to redirect, the water stream must either hit along the length or the starting top.</li>
                <li>Water that enters from any segment of a pipe will come out below the last unit.</li>
                <ul>
                    <li>
                        For example, a pipe ending at <code>(50, 50)</code> will redirect water to the point
                        <code>(50, 51)</code>.
                    </li>
                </ul>
                <li>
                    A bucket may be inside another bucket such that they are either aligned at the top or one
                    enclosing the other completely.
                </li>
                <li>No bucket will be partially contained in another bucket.</li>
                <li>
                    Overflowing of buckets will happen when the bucket is filled up, and is only possible if its
                    corner's above and diagonals are unobstructed.
                </li>
                <ul>
                    <li>
                        Using the ASCII art below as an illustration, the middle bucket with water <code>~</code> will
                        overflow as the points marked <code>@</code> are unobstructed, with water <code>.</code> flowing
                        downwards.<br>
                        <table class="ascii-code-table">
                            <tbody><tr>
                                <td>
                                    <code>
                                        x x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x x<br>
                                        xxx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xxx<br>
                                        &nbsp;&nbsp;@@@&nbsp;&nbsp;@@@<br>
                                        &nbsp;&nbsp;.x~~~~x.<br>
                                        &nbsp;&nbsp;.xxxxxx.
                                    </code>
                                </td>
                            </tr>
                        </tbody></table>
                    </li>
                </ul>
                <li>If a stream hits a bucket's corner, the stream will fill the bucket and overflow it.</li>
                <li>No shapes will cross another.</li>
                <ul>
                    <li>A bucket may encroach into the square boundaries of a pipe, but not block the path.</li>
                    <li>
                        A pipe will not enter the inside of a bucket, so it may only start or end at the top of the
                        bucket.
                    </li>
                </ul>
                <li>
                    Do not include water that look like they might be trapped in between buckets or pipes, we only
                    need the area of buckets that will be filled.
                </li>
                <ul>
                    <li>
                        For example, the area marked <code>!</code> below should not be included, and should only count
                        those marked in <code>~</code>.
                        <table class="ascii-code-table">
                            <tbody><tr>
                                <td>
                                    <code>
                                        &nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br>
                                        .....&nbsp;.....<br>
                                        .x~x!!!x~x.<br>
                                        .xxx!!!xxx.<br>
                                        .&nbsp;x~~~~~x&nbsp;.<br>
                                        .&nbsp;xxxxxxx&nbsp;.<br>

                                    </code>
                                </td>
                            </tr>
                        </tbody></table>
                    </li>
                </ul>
            </ul>
        </div>
    </div>
    <div class="clearDiv"></div>
</div>
</body>
</html>
